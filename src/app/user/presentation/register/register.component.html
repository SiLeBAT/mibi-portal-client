<!-- the register component template contains a simple registration form with fields for
first name, last name, username and password. It displays validation messages for invalid fields
when the submit button is clicked. On submit the register() method is called if the form is valid. -->

<form [formGroup]="registerForm" (ngSubmit)="onRegister()">
    <mat-form-field class="mibi-form-field" color="accent">
        <input
            type="text"
            matInput
            placeholder="W채hlen Sie Ihr Institut"
            formControlName="institution"
            autocomplete="off"
            required
            [matAutocomplete]="autoGroup"
        />
        <mat-error class="mibi-form-field__error"
            >Muss ein g체ltiges Institut sein.</mat-error
        >
        <mat-autocomplete #autoGroup="matAutocomplete">
            <mat-option
                class="mibi-register-mat-option"
                *ngFor="let institution of filteredOptions$ | async"
                [value]="institution"
            >
                {{ institution }}
            </mat-option>
        </mat-autocomplete>
    </mat-form-field>

    <p>
        Sollte Ihr Institut hier nicht aufgelistet sein, senden Sie uns bitte
        eine <a href="mailto:{{ supportContact }}"> Nachricht</a>.
    </p>

    <mat-form-field class="mibi-form-field" color="accent">
        <input
            matInput
            placeholder="Vorname"
            name="firstName"
            formControlName="firstName"
            required
        />
    </mat-form-field>

    <mat-form-field class="mibi-form-field" color="accent">
        <input
            matInput
            placeholder="Nachname"
            name="lastName"
            formControlName="lastName"
            required
        />
    </mat-form-field>

    <mat-form-field class="mibi-form-field" color="accent">
        <input
            matInput
            placeholder="E-Mail"
            name="email"
            formControlName="email"
            required
        />
        <mat-error
            class="mibi-form-field__error"
            *ngIf="registerForm.controls.email.errors?.email"
            >Muss eine g체ltige E-Mail sein.</mat-error
        >
    </mat-form-field>

    <mibi-password></mibi-password>

    <div class="mibi-register-actions">
        <a
            class="mibi-register-actions__button"
            mat-button
            color="primary"
            [routerLink]="[userLinks.login]"
            >Zur체ck</a
        >
        <button
            class="mibi-register-actions__button"
            mat-raised-button
            color="accent"
            type="submit"
            [disabled]="!registerForm.valid"
        >
            Registrieren
        </button>
    </div>
</form>
